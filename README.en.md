# üì¶ GitHub Repository Backup Tool

[‰∏≠Êñá](README.md)

This is an automated **GitHub Actions**‚Äìbased backup tool.
It can run on a **daily schedule** or be triggered manually. It automatically fetches the **latest Release** or **a specified branch source code** from the repositories you define and stores them in this repository for long-term archiving.
üëâ [View the backup repository list](backup-repos.md)

## ‚ú® Features

* Automatically checks and downloads the latest **Release** of the target repository (including tarball, zipball, and assets).
* If no Release is available, it will back up the specified branch (defaults to the repository‚Äôs default branch).
* Automatically generates a `backup-repos.md` document listing key information about all backed-up repositories (description, Stars, Forks, last update).
* Supports **daily scheduled execution** (default: 8:00 AM Beijing Time, configurable) or **manual trigger**.

---

## üìÇ File Overview

* `backup-repos.url`
  Stores the GitHub repository links to back up, one per line.

  * Supports direct repository URLs:

    ```txt
    https://github.com/OWNER/REPO
    ```
  * Supports specifying a branch (`tree/branch-name`):

    ```txt
    https://github.com/OWNER/REPO/tree/branch-name
    ```
  * Lines starting with `#` are comments and will be ignored.
  * Empty lines are ignored.

* `backup-repos.md`
  Auto-generated by the GitHub Action, containing a table of all currently backed-up repositories.
  **No manual edits required.**

* `.github/workflows/backup.yml`
  Workflow configuration file (the YAML content shown at the top of this document).
  Controls how the backup job runs.

* `releases/`
  Auto-generated directory that stores all downloaded Releases or branch source archives.

---

## üöÄ Usage

1. **Create a new repository**.
2. In the new repository, create `.github/workflows/backup.yml` and copy the GitHub Action workflow provided by this project.
3. Add a `backup-repos.url` file in the root directory with the repositories you want to back up, for example:

   ```txt
   # Example: backup a repository
   https://github.com/torvalds/linux

   # Example: backup a specific branch
   https://github.com/vitejs/vite/tree/main

   # Comment line (will be ignored)
   # https://github.com/xxxx/xxxx
   ```
4. Commit and push the code to GitHub.
5. Open the repository‚Äôs **Actions** page, and you‚Äôll see the `Backup Releases` workflow:

   * It will **run automatically every day at 8:00 AM Beijing Time** (configurable).
   * You can also manually trigger it by clicking **Run workflow**.

After execution, you‚Äôll find in your repository:

* Downloaded Releases or source archives (stored under `releases/OWNER/REPO/...`).
* An automatically generated or updated `backup-repos.md` file.

---

## üìñ Notes

* Repositories may be large‚Äîkeep GitHub repository size limits in mind (back up only important projects).
* If a target repository is deleted or made private, the script will skip it and log a warning.
* `backup-repos.md` will only be regenerated if `backup-repos.url` is modified.
* **You must enable `Read and write permissions` in Repository ‚Üí Settings ‚Üí Actions ‚Üí General ‚Üí Workflow permissions, otherwise the workflow won‚Äôt be able to push backup results.**
* GitHub imposes file size restrictions:
  - **>50MB**: you will receive a warning when pushing.
  - **>100MB**: pushes will be blocked entirely.
* To avoid these limits, the script uses the `7z` tool to split files larger than **50MB** into volumes (each ‚â§49MB).  
  - Split files are typically named like:  
    ```
    xxx.tar.gz.7z.001
    xxx.tar.gz.7z.002
    ...
    ```
  - To extract (requires [7-Zip](https://www.7-zip.org/) or a compatible tool):  
    ```bash
    7z x xxx.tar.gz.7z.001
    ```
    This will automatically join all parts and restore the original file.  
  - On Windows, you can simply use the **7-Zip GUI**: right-click the `.001` file ‚Üí `Extract Here`.

The generated [backup-repos.md](backup-repos.md) looks like this:

| Repository                                          | Description                          | Stars  | Forks   | Last Updated |
| --------------------------------------------------- | ------------------------------------ | ------ | ------- | ------------ |
| [torvalds/linux](https://github.com/torvalds/linux) | Linux kernel source tree             | ‚≠ê 167k | üç¥ 50k  | 2025-09-23   |
| [vitejs/vite](https://github.com/vitejs/vite)       | Next generation frontend tooling     | ‚≠ê 65k  | üç¥ 5.2k | 2025-09-20   |
| [vuejs/core](https://github.com/vuejs/core)         | Vue.js is a progressive framework... | ‚≠ê 42k  | üç¥ 8.1k | 2025-09-22   |
